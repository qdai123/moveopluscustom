<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="ir.ui.view" id="mv_compute_discount_line_form">
        <field name="name">mv_compute_discount_line_form</field>
        <field name="model">mv.compute.discount.line</field>
        <field name="arch" type="xml">
            <form string="MV Compute Discount Line FORM">
                <sheet>
                    <field name="is_two_month" invisible="1"/>
                    <field name="is_quarter" invisible="1"/>
                    <field name="is_year" invisible="1"/>
                    <div class="oe_button_box" name="button_box" groups="base.group_user">
                        <button class="oe_stat_button" name="action_view_two_month" type="object" icon="fa-pencil-square-o" invisible="is_two_month == False">
                            Xem chiết khấu 2 tháng
                        </button>
                        <button class="oe_stat_button" name="action_view_quarter" type="object" icon="fa-pencil-square-o" invisible="is_quarter == False">
                            Xem chiết khấu theo quý
                        </button>
                        <button class="oe_stat_button" name="action_view_year" type="object" icon="fa-pencil-square-o" invisible="is_year == False">
                            Xem chiết khấu theo năm
                        </button>
                    </div>
                    <group>
                        <group name="group_information_1">
                            <field name="partner_id"/>
                            <field name="level"/>
                            <field name="basic" invisible="True"/>
                            <field name="currency_id" invisible="True"/>
                        </group>
                        <group name="group_information_2">
                            <group>
                                <field name="quantity"/>
                                <field name="quantity_discount"/>
                            </group>
                            <group>
                                <field name="quantity_from"/>
                                <field name="quantity_to"/>
                            </group>
                        </group>
                        <group>
                            <field name="amount_total" widget="monetary"/>
                            <field name="total_money" string="Tổng tiền C/Khấu" widget="monetary"/>
                        </group>
                        <group/>
                    </group>
                    <group>
                        <group name="group_percentage_discount_by_month" string="(%) Tháng &amp; 2 Tháng">
                            <group>
                                <field name="month" string="(%) CK Tháng"/>
                                <field name="month_money" string="Tiền CK Tháng" widget="monetary"/>
                            </group>
                            <group>
                                <field name="two_month" string="(%) CK 2 Tháng"/>
                                <field name="two_money" string="Tiền CK 2 Tháng" widget="monetary"/>
                            </group>
                        </group>
                        <group name="group_percentage_discount_by_quarter_and_year" string="(%) Quý &amp; Năm">
                            <group>
                                <field name="quarter" string="(%) CK Quý"/>
                                <field name="quarter_money" string="Tiền CK Quý" widget="monetary"/>
                            </group>
                            <group>
                                <field name="year" string="(%) CK Năm"/>
                                <field name="year_money" string="Tiền CK Năm" widget="monetary"/>
                            </group>
                        </group>
                        <group name="group_percentage_promote_discount" string="(%) Khuyến Khích">
                            <field name="promote_discount_percentage" string="(%) CK K/Khích"/>
                            <field name="promote_discount_money" string="Tiền CK K/Khích" widget="monetary" readonly="True"/>
                        </group>
                        <group/>
                    </group>
                    <notebook>
                        <page string="Đơn hàng">
                            <field name="sale_ids" nolabel="1">
                                <tree create="false" edit="false" delete="false">
                                    <field name="currency_id" column_invisible="True"/>
                                    <field name="name" string="Order"/>
                                    <field name="partner_id" string="Dealer/Sub-Dealer/Customer"/>
                                    <field name="amount_total" sum="Price" widget="monetary"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Chi tiết sản phẩm lốp">
                            <field name="order_line_ids" nolabel="1">
                                <tree create="false" edit="false" delete="false" decoration-danger="price_unit == 0">
                                    <field name="currency_id" column_invisible="True"/>
                                    <field name="order_id" string="Order"/>
                                    <field name="product_id"/>
                                    <field name="product_uom_qty" sum="Quantity" decoration-danger="product_uom_qty &lt; 1"/>
                                    <field name="qty_delivered" sum="Quantity Delivered" decoration-danger="product_uom_qty &lt; 1"/>
                                    <field name="price_unit" widget="monetary" sum="Price"/>
                                    <field name="price_subtotal"  widget="monetary" sum="Price Subtotal"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="mv_compute_discount_line_tree">
        <field name="name">mv_compute_discount_line_tree</field>
        <field name="model">mv.compute.discount.line</field>
        <field name="arch" type="xml">
            <tree string="MV Compute Discount Line TREE" default_order="partner_id desc month_parent desc">
                <field name="month_parent" optional="hidden"/>
                <field name="name" string="Tháng/Năm" optional="hidden"/>
                <field name="partner_sales_state" decoration-success="partner_sales_state in ['qualified', 'qualified_by_approving']" decoration-warning="partner_sales_state == 'imqualified'" widget="badge" optional="hidden"/>
                <field name="partner_id"/>
                <field name="level" optional="show"/>
                <field name="quantity" sum="Quantity" optional="show"/>
                <field name="quantity_discount" sum="Quantity" optional="hidden"/>
                <field name="quantity_from" optional="hidden"/>
                <field name="quantity_to" optional="hidden"/>
                <field name="amount_total" string="Doanh thu" widget="monetary" sum="Amount month"/>
                <field name="month" optional="hidden"/>
                <field name="month_money" widget="monetary" sum="Discount month"/>
                <field name="two_month" optional="hidden"/>
                <field name="two_money" widget="monetary" sum="Discount two month"/>
                <field name="quarter" optional="hidden"/>
                <field name="quarter_money" widget="monetary" sum="Discount quarter"/>
                <field name="year" optional="hidden"/>
                <field name="year_money" widget="monetary" sum="Discount year"/>
                <field name="promote_discount_percentage" optional="hidden"/>
                <field name="promote_discount_money" widget="monetary" sum="Promote Discount"/>
                <field name="total_money" string="Tổng số tiền" widget="monetary" sum="Total money"/>
                <field column_invisible="True" name="basic"/>
                <field column_invisible="True" name="currency_id"/>
            </tree>
        </field>
    </record>

    <record id="mv_compute_discount_line_search_view" model="ir.ui.view">
        <field name="model">mv.compute.discount.line.search</field>
        <field name="model">mv.compute.discount.line</field>
        <field name="arch" type="xml">
            <search string="MV Compute Discount Line SEARCH">
                <field name="partner_id"/>
                <filter name="filter_partner_sales_state" string="Đại lý Chưa Đạt" domain="[('partner_sales_state', '=', 'imqualified')]"/>
            </search>
        </field>
    </record>
</odoo>
